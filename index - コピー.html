<!DOCTYPE html>
<html lang="ja">
  
<head>
  <title>きみどりマップ</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <div id="pwa-banner" class="pwa-banner" style="display: none;">
    <div class="pwa-banner-content">
      <img src="pwa-192.png" alt="icon" class="pwa-icon">
      <div class="pwa-text">
        <strong>きみどりマップ</strong>
        <span>ホーム画面に追加してオフラインで利用</span>
      </div>
      <button id="pwa-install-btn" class="pwa-btn">追加</button>
      <span id="pwa-close-btn" class="pwa-close">&times;</span>
    </div>
  </div>

  <div id="map"></div>
  <div class="crosshair"></div>

  <div id="currentLocationControl" title="現在地に移動">
    <i class="fas fa-location-arrow"></i>
  </div>

  <div id="bottom-container">
    <div id="button-row">
        <button id="saveCenterBtn">REC＋</button>
        <button id="saveBtn">REC〇</button>
    </div>
    <div id="coordinate-text">
      <font color="#00FFFF">● </font><span id="currentLat"></span>, <span id="currentLng"></span>, <span id="currentElevation"></span>m<br>
      <font color="blue">＋ </font><span id="mapCenterLat"></span>, <span id="mapCenterLng"></span>, <span id="mapCenterElevation"></span>m<br>
      ＋までの距離: <span id="distance">---</span> 標高差: <span id="elevationDifference">---</span>
    </div>
  </div>
  
  <div class="menu">
    <span class="closeBtn">&times;閉じる</span>
    <div id="storage-info-display" style="margin-top: 20px; padding-top: 10px; border-top: 1px solid #ccc;">
      <h3>地図とデータの保存量</h3>
      <div id="storageUsage">容量: 取得中...</div>
      <div id="storageQuota">制限: 取得中...</div>
    </div>

    <h2 class="accordion-header">データ読込</h2>
    <div class="accordion-content">
        <button class="menuBtn" id="loadGeoJSON">GeoJSON/KML/GPX</button>
        <input type="file" id="fileInput" accept=".geojson, .kml, .gpx" style="display: none;" />
        <p>
          <label for="labelAttr" class="label-select-title">ラベル</label>
          <select id="labelAttr" class="label-select"></select>
          <button id="applyLabel" class="menuBtn">表示</button>
        </p>
    </div>

    <h2 class="accordion-header">データ出力</h2>
    <div class="accordion-content">
        <p><button class="menuBtn" id="exportGeoJSONBtn">GeoJSON</button></p>
        <p><button class="menuBtn" id="exportKmlBtn">KML</button></p>
        <p><button class="menuBtn" id="exportGpxBtn">GPX</button></p>
    </div>

    <h2 class="accordion-header">データ消去</h2>
    <div class="accordion-content">
        <p><button class="menuBtn" id="allClearBtn">POI消去</button></p>
        <p><button class="menuBtn" id="clearGeojson">読込データ消去</button></p>
    </div>

    <div class="toggleBtn"><i class="fas fa-bars"></i></div>
  </div>
  
  <div id="poi-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 2000;">
    <div style="position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%); background-color: white; padding: 10px; border-radius: 8px; width: 80%; max-width: 350px;">
      <h4 id="modal-title">地点登録</h4>
      <label for="poi-number">番号 (数値のみ):</label>
      <input type="number" id="poi-number" style="width: 100%; padding: 8px; margin-bottom: 15px; box-sizing: border-box;"><br>
      
      <label for="poi-description">説明:</label>
      <textarea id="poi-description" rows="3" style="width: 100%; padding: 8px; margin-bottom: 20px; box-sizing: border-box;"></textarea>
      
      <button id="modal-save" style="background-color: #007bff; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">保存</button>
      <button id="modal-cancel" style="background-color: #6c757d; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer;">キャンセル</button>
    </div>
  </div>
   
  <script type="module" src="src/script.js"></script>

</body>
</html>